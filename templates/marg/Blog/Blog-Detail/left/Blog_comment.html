{% load static %}
<div class="col-lg-12 mb-5">
  <div class="comment-area card border-0 p-5">
    <h4 class="mb-4">{{ post.comment_set.count }} Comments</h4>
    <ul class="comment-tree list-unstyled">
      
      {% for comment in post.comment_set.all %}
      <li class="mb-5">
        <div class="comment-area-box">
          <div style="display: flex; align-items: center;">
            <img
              alt="{{ comment.user.username }}"
              src="{% if comment.user.profile_image %}{{ comment.user.profile_image.url }}{% else %}{% static 'marg/assets/img/profile.jpg' %}{% endif %}"
              class="img-fluid"
              style="height: 50px; width: 50px; border-radius: 50%; margin-right: 10px;"
            />
            <h6 class="mb-1">{{ comment.user.get_full_name|default:comment.user.username }}</h6>
          </div>

          

          <div class="comment-meta mt-2 float-right">
            <span class="date-comm">Posted {{ comment.created_at|date:"jS F, Y" }}</span>
          </div>

          <div class="comment-content mt-3">
            <p>{{ comment.comment }}</p>

            {% if comment.image %}
              <img 
                src="{{ comment.image.url }}" 
                alt="Comment image" 
                style="max-width: 100%; height: auto; width: 100px; margin-top: 10px; border-radius: 10px;"
              />
            {% endif %}

          </div>
        </div>
      </li>
      {% endfor %}
      
    </ul>
  </div>
</div>
